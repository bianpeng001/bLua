[TOC]

# Cs2Lua

## 问题
跨语言调用, 总归是双向的. 所以, 经常有c#里面调用一个luafunction, 或者持有一个luatable的做法.
但还是有个隐患, 某些情况下会有循环引用, 导致内存无法释放.

比如:
在c#里面, 持有一个LuaTable, 往里面注册了一个闭包. 此时闭包里面引用住了c#实例. 这里就有了一个循环引用, 当依赖对方先释放, 自己才能释放时, 就内存泄露了.
要么一方去主动释放引用, 要么就是不要这么用.

## 解决
通过一个规范, 在c#端, 不持有luafunction, luatable, 如果需要用, 则立刻释放. 允许持有一些长期对象.
这个机制就叫做Cs2Lua, 实际这个功能的长相有点像RPC. 相当于c#发了一个消息给lua, 但不是函数调用, 不太关心返回值的用法.


## 答疑
Lua2Cs哪去了? 我只能说, 猜.


